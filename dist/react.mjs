"use client";import{B as A,C as M,F as f,M as z,u as h,z as l}from"./chunk-LHVXGV4H.mjs";import"./chunk-57T3EAOB.mjs";import{useLayoutEffect as x,useRef as D}from"react";import{createContext as w,useContext as L,useEffect as R,useState as b}from"react";var C;try{C=new l({name:"react.hooks.useMozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.hooks.useMozAdsPlacement could not be instantiated: ${e}`)}var u=class{placements={};async getPlacementWithContent(t){let a=this.placements[t.placementId];if(a)return a;try{let o=await z({placements:{[t.placementId]:t}});this.placements={...this.placements,...o}}catch(o){return C?.error(`Unable to fetch ads; ${o.message}`,{type:"placementComponent.adLoad.failure",eventLabel:"ad_load_error",errorId:o?.name}),t.onError?.({error:o}),t}return this.placements[t.placementId]}},k=w(new u),E=({placementId:e,iabContent:t,fixedSize:a,onError:o})=>{let[d,c]=b({placementId:e,iabContent:t,fixedSize:a}),i=L(k),m=async()=>{c(await i.getPlacementWithContent({placementId:e,iabContent:t,fixedSize:a,onError:o}))};return R(()=>{m()},[e]),d};import{jsx as v}from"react/jsx-runtime";var y;try{y=new l({name:"react.components.MozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.components.MozAdsPlacement could not be instantiated: ${e}`)}function G({placementId:e,iabContent:t,fixedSize:a,onClick:o,onReport:d,onError:c,onLoad:i}){let{width:m,height:p}=a||{},g={width:m&&`${m}px`,height:p&&`${p}px`};try{let r=E({placementId:e,iabContent:t,fixedSize:a,onError:c}),s=D(null),P={onClick:n=>{M(r),o?.(n)},onReport:n=>{d?.(n)},onError:n=>{c?.(n)},onLoad:n=>{A.observe(r),i?.(n)}};return x(()=>{s.current&&f(s.current,{placement:r,...P,onError:()=>{let n=h(r);s.current&&f(s.current,{placement:{...r,content:n},...P})}})},[r]),v("div",{ref:s,style:g})}catch(r){try{y?.error(`An unexpected error has occured when rendering ${e}: ${r?.message}`,{type:"placementComponent.render.error",eventLabel:"render_error",placementId:e,errorId:r?.name}),c?.({error:r})}catch{}return v("div",{style:g})}}export{G as MozAdsPlacement,u as MozAdsPlacementContextState,k as mozAdsPlacementContext,E as useMozAdsPlacement};
