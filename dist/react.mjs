"use client";import{B as h,C as v,D as d,E as x,K as g,R as E,u as M,z as l}from"./chunk-PZ4HDGGB.mjs";import"./chunk-UNPJE3EO.mjs";function k(){let o,e;return{promise:new Promise((t,c)=>{o=t,e=c}),resolve:o,reject:e}}Promise.withResolvers=Promise.withResolvers??k;import{createContext as D,useContext as W}from"react";var P=D(d()),R=()=>W(P);import{jsx as $}from"react/jsx-runtime";var X=({children:o,config:e=d()})=>$(P.Provider,{value:e,children:o});import{useLayoutEffect as O,useRef as T}from"react";import{createContext as I,useContext as _,useEffect as F,useState as H}from"react";var w;try{w=new l({name:"react.hooks.useMozAdsPlacement"})}catch(o){console.debug(`DefaultLogger for react.hooks.useMozAdsPlacement could not be instantiated: ${o}`)}var A=class{placements={};async getPlacementWithContent(e){let s=this.placements[e.placementId];if(s)return s;try{let t=await E({placements:{[e.placementId]:e}});this.placements={...this.placements,...t}}catch(t){return w?.error(`Unable to fetch ads; ${t.message}`,{type:"placementComponent.adLoad.failure",eventLabel:"ad_load_error",errorId:t?.name}),e.onError?.({error:t}),e}return this.placements[e.placementId]}},N=I(new A),y=({config:o,placementId:e,iabContent:s,fixedSize:t,onError:c})=>{x({...R(),...o});let[f,a]=H({placementId:e,iabContent:s,fixedSize:t}),p=_(N),i=async()=>{a(await p.getPlacementWithContent({placementId:e,iabContent:s,fixedSize:t,onError:c}))};return F(()=>{i()},[e]),f};import{jsx as L}from"react/jsx-runtime";var b;try{b=new l({name:"react.components.MozAdsPlacement"})}catch(o){console.debug(`DefaultLogger for react.components.MozAdsPlacement could not be instantiated: ${o}`)}function de({config:o,placementId:e,iabContent:s,fixedSize:t,onClick:c,onReport:f,onError:a,onLoad:p}){let{width:i,height:u}=t||{},z={width:i&&`${i}px`,height:u&&`${u}px`};try{let r=y({config:o,placementId:e,iabContent:s,fixedSize:t,onError:a}),m=T(null),C={onClick:n=>{v(r),c?.(n)},onReport:n=>{f?.(n)},onError:n=>{a?.(n)},onLoad:n=>{h.observe(r),p?.(n)}};return O(()=>{m.current&&g(m.current,{placement:r,...C,onError:()=>{let n=M(r);m.current&&g(m.current,{placement:{...r,content:n},...C})}})},[r]),L("div",{ref:m,style:z})}catch(r){try{b?.error(`An unexpected error has occured when rendering ${e}: ${r?.message}`,{type:"placementComponent.render.error",eventLabel:"render_error",placementId:e,errorId:r?.name}),a?.({error:r})}catch{}return L("div",{style:z})}}export{X as MozAdsConfigProvider,de as MozAdsPlacement,A as MozAdsPlacementContextState,P as mozAdsConfigContext,N as mozAdsPlacementContext,R as useMozAdsConfig,y as useMozAdsPlacement};
