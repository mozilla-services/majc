"use client";import{A as g,B as P,E as h,L as A,y as m}from"./chunk-VIWIJC5Q.mjs";import"./chunk-57T3EAOB.mjs";import{useLayoutEffect as x,useRef as b}from"react";import{createContext as v,useContext as y,useEffect as w,useState as L}from"react";var M;try{M=new m({name:"react.hooks.useMozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.hooks.useMozAdsPlacement could not be instantiated: ${e}`)}var f=class{placements={};async getPlacementWithContent(t){let n=this.placements[t.placementId];if(n)return n;try{let o=await A({placements:{[t.placementId]:t}});this.placements={...this.placements,...o}}catch(o){return M?.error(`Unable to fetch ads; ${o.message}`,{type:"placementComponent.adLoad.failure",eventLabel:"ad_load_error",errorId:o?.name}),t.onError?.({error:o}),t}return this.placements[t.placementId]}},R=v(new f),z=({placementId:e,iabContent:t,fixedSize:n,onError:o})=>{let[l,s]=L({placementId:e,iabContent:t,fixedSize:n}),d=y(R),c=async()=>{s(await d.getPlacementWithContent({placementId:e,iabContent:t,fixedSize:n,onError:o}))};return w(()=>{c()},[e]),l};import{jsx as C}from"react/jsx-runtime";var E;try{E=new m({name:"react.components.MozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.components.MozAdsPlacement could not be instantiated: ${e}`)}function q({placementId:e,iabContent:t,fixedSize:n,onClick:o,onReport:l,onError:s,onLoad:d}){let{width:c,height:p}=n||{},u={width:c&&`${c}px`,height:p&&`${p}px`};try{let r=z({placementId:e,iabContent:t,fixedSize:n,onError:s}),i=b(null);return x(()=>{i.current&&h(i.current,{placement:r,onClick:a=>{P(r),o?.(a)},onReport:a=>{l?.(a)},onError:a=>{s?.(a)},onLoad:a=>{console.log("loaded placement",r.placementId),g.observe(r),d?.(a)}})},[r]),C("div",{ref:i,style:u})}catch(r){try{E?.error(`An unexpected error has occured when rendering ${e}: ${r?.message}`,{type:"placementComponent.render.error",eventLabel:"render_error",placementId:e,errorId:r?.name}),s?.({error:r})}catch{}return C("div",{style:u})}}export{q as MozAdsPlacement,f as MozAdsPlacementContextState,R as mozAdsPlacementContext,z as useMozAdsPlacement};
