"use client";"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; } var _class;var _chunkUI2FKVBIjs = require('./chunk-UI2FKVBI.js');require('./chunk-34ONY7SM.js');var _react = require('react');var M;try{M=new (0, _chunkUI2FKVBIjs.y)({name:"react.hooks.useMozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.hooks.useMozAdsPlacement could not be instantiated: ${e}`)}var f= (_class =class{constructor() { _class.prototype.__init.call(this); }__init() {this.placements={}}async getPlacementWithContent(t){let n=this.placements[t.placementId];if(n)return n;try{let o=await _chunkUI2FKVBIjs.L.call(void 0, {placements:{[t.placementId]:t}});this.placements={...this.placements,...o}}catch(o){return _optionalChain([M, 'optionalAccess', _ => _.error, 'call', _2 => _2(`Unable to fetch ads; ${o.message}`,{type:"placementComponent.adLoad.failure",eventLabel:"ad_load_error",errorId:_optionalChain([o, 'optionalAccess', _3 => _3.name])})]),_optionalChain([t, 'access', _4 => _4.onError, 'optionalCall', _5 => _5({error:o})]),t}return this.placements[t.placementId]}}, _class),R= exports.mozAdsPlacementContext =_react.createContext.call(void 0, new f),z= exports.useMozAdsPlacement =({placementId:e,iabContent:t,fixedSize:n,onError:o})=>{let[l,s]=_react.useState.call(void 0, {placementId:e,iabContent:t,fixedSize:n}),d=_react.useContext.call(void 0, R),c=async()=>{s(await d.getPlacementWithContent({placementId:e,iabContent:t,fixedSize:n,onError:o}))};return _react.useEffect.call(void 0, ()=>{c()},[e]),l};var _jsxruntime = require('react/jsx-runtime');var E;try{E=new (0, _chunkUI2FKVBIjs.y)({name:"react.components.MozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.components.MozAdsPlacement could not be instantiated: ${e}`)}function q({placementId:e,iabContent:t,fixedSize:n,onClick:o,onReport:l,onError:s,onLoad:d}){let{width:c,height:p}=n||{},u={width:c&&`${c}px`,height:p&&`${p}px`};try{let r=z({placementId:e,iabContent:t,fixedSize:n,onError:s}),i=_react.useRef.call(void 0, null);return _react.useLayoutEffect.call(void 0, ()=>{i.current&&_chunkUI2FKVBIjs.E.call(void 0, i.current,{placement:r,onClick:a=>{_chunkUI2FKVBIjs.B.call(void 0, r),_optionalChain([o, 'optionalCall', _6 => _6(a)])},onReport:a=>{_optionalChain([l, 'optionalCall', _7 => _7(a)])},onError:a=>{_optionalChain([s, 'optionalCall', _8 => _8(a)])},onLoad:a=>{console.log("loaded placement",r.placementId),_chunkUI2FKVBIjs.A.observe(r),_optionalChain([d, 'optionalCall', _9 => _9(a)])}})},[r]),_jsxruntime.jsx.call(void 0, "div",{ref:i,style:u})}catch(r){try{_optionalChain([E, 'optionalAccess', _10 => _10.error, 'call', _11 => _11(`An unexpected error has occured when rendering ${e}: ${_optionalChain([r, 'optionalAccess', _12 => _12.message])}`,{type:"placementComponent.render.error",eventLabel:"render_error",placementId:e,errorId:_optionalChain([r, 'optionalAccess', _13 => _13.name])})]),_optionalChain([s, 'optionalCall', _14 => _14({error:r})])}catch (e2){}return _jsxruntime.jsx.call(void 0, "div",{style:u})}}exports.MozAdsPlacement = q; exports.MozAdsPlacementContextState = f; exports.mozAdsPlacementContext = R; exports.useMozAdsPlacement = z;
