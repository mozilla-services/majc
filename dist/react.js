"use client";"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; } var _class;var _chunkQ7N6K3TOjs = require('./chunk-Q7N6K3TO.js');require('./chunk-34ONY7SM.js');var _react = require('react');var C;try{C=new (0, _chunkQ7N6K3TOjs.z)({name:"react.hooks.useMozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.hooks.useMozAdsPlacement could not be instantiated: ${e}`)}var u= (_class =class{constructor() { _class.prototype.__init.call(this); }__init() {this.placements={}}async getPlacementWithContent(t){let a=this.placements[t.placementId];if(a)return a;try{let o=await _chunkQ7N6K3TOjs.M.call(void 0, {placements:{[t.placementId]:t}});this.placements={...this.placements,...o}}catch(o){return _optionalChain([C, 'optionalAccess', _ => _.error, 'call', _2 => _2(`Unable to fetch ads; ${o.message}`,{type:"placementComponent.adLoad.failure",eventLabel:"ad_load_error",errorId:_optionalChain([o, 'optionalAccess', _3 => _3.name])})]),_optionalChain([t, 'access', _4 => _4.onError, 'optionalCall', _5 => _5({error:o})]),t}return this.placements[t.placementId]}}, _class),k= exports.mozAdsPlacementContext =_react.createContext.call(void 0, new u),E= exports.useMozAdsPlacement =({placementId:e,iabContent:t,fixedSize:a,onError:o})=>{let[d,c]=_react.useState.call(void 0, {placementId:e,iabContent:t,fixedSize:a}),i=_react.useContext.call(void 0, k),m=async()=>{c(await i.getPlacementWithContent({placementId:e,iabContent:t,fixedSize:a,onError:o}))};return _react.useEffect.call(void 0, ()=>{m()},[e]),d};var _jsxruntime = require('react/jsx-runtime');var y;try{y=new (0, _chunkQ7N6K3TOjs.z)({name:"react.components.MozAdsPlacement"})}catch(e){console.debug(`DefaultLogger for react.components.MozAdsPlacement could not be instantiated: ${e}`)}function G({placementId:e,iabContent:t,fixedSize:a,onClick:o,onReport:d,onError:c,onLoad:i}){let{width:m,height:p}=a||{},g={width:m&&`${m}px`,height:p&&`${p}px`};try{let r=E({placementId:e,iabContent:t,fixedSize:a,onError:c}),s=_react.useRef.call(void 0, null),P={onClick:n=>{_chunkQ7N6K3TOjs.C.call(void 0, r),_optionalChain([o, 'optionalCall', _6 => _6(n)])},onReport:n=>{_optionalChain([d, 'optionalCall', _7 => _7(n)])},onError:n=>{_optionalChain([c, 'optionalCall', _8 => _8(n)])},onLoad:n=>{_chunkQ7N6K3TOjs.B.observe(r),_optionalChain([i, 'optionalCall', _9 => _9(n)])}};return _react.useLayoutEffect.call(void 0, ()=>{s.current&&_chunkQ7N6K3TOjs.F.call(void 0, s.current,{placement:r,...P,onError:()=>{let n=_chunkQ7N6K3TOjs.u.call(void 0, r);s.current&&_chunkQ7N6K3TOjs.F.call(void 0, s.current,{placement:{...r,content:n},...P})}})},[r]),_jsxruntime.jsx.call(void 0, "div",{ref:s,style:g})}catch(r){try{_optionalChain([y, 'optionalAccess', _10 => _10.error, 'call', _11 => _11(`An unexpected error has occured when rendering ${e}: ${_optionalChain([r, 'optionalAccess', _12 => _12.message])}`,{type:"placementComponent.render.error",eventLabel:"render_error",placementId:e,errorId:_optionalChain([r, 'optionalAccess', _13 => _13.name])})]),_optionalChain([c, 'optionalCall', _14 => _14({error:r})])}catch (e2){}return _jsxruntime.jsx.call(void 0, "div",{style:g})}}exports.MozAdsPlacement = G; exports.MozAdsPlacementContextState = u; exports.mozAdsPlacementContext = k; exports.useMozAdsPlacement = E;
