var w={bodySerializer:e=>JSON.stringify(e,(n,r)=>typeof r=="bigint"?r.toString():r)};var I={$body_:"body",$headers_:"headers",$path_:"path",$query_:"query"},L=Object.entries(I);var j=async(e,n)=>{let r=typeof n=="function"?await n(e):n;if(r)return e.scheme==="bearer"?`Bearer ${r}`:e.scheme==="basic"?`Basic ${btoa(r)}`:r};var U=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},G=e=>{switch(e){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},V=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},T=({allowReserved:e,explode:n,name:r,style:a,value:s})=>{if(!n){let t=(e?s:s.map(l=>encodeURIComponent(l))).join(G(a));switch(a){case"label":return`.${t}`;case"matrix":return`;${r}=${t}`;case"simple":return t;default:return`${r}=${t}`}}let i=U(a),o=s.map(t=>a==="label"||a==="simple"?e?t:encodeURIComponent(t):g({allowReserved:e,name:r,value:t})).join(i);return a==="label"||a==="matrix"?i+o:o},g=({allowReserved:e,name:n,value:r})=>{if(r==null)return"";if(typeof r=="object")throw new Error("Deeply-nested arrays/objects aren\u2019t supported. Provide your own `querySerializer()` to handle these.");return`${n}=${e?r:encodeURIComponent(r)}`},C=({allowReserved:e,explode:n,name:r,style:a,value:s,valueOnly:i})=>{if(s instanceof Date)return i?s.toISOString():`${r}=${s.toISOString()}`;if(a!=="deepObject"&&!n){let l=[];Object.entries(s).forEach(([d,b])=>{l=[...l,d,e?b:encodeURIComponent(b)]});let f=l.join(",");switch(a){case"form":return`${r}=${f}`;case"label":return`.${f}`;case"matrix":return`;${r}=${f}`;default:return f}}let o=V(a),t=Object.entries(s).map(([l,f])=>g({allowReserved:e,name:a==="deepObject"?`${r}[${l}]`:l,value:f})).join(o);return a==="label"||a==="matrix"?o+t:t};var $=/\{[^{}]+\}/g,_=({path:e,url:n})=>{let r=n,a=n.match($);if(a)for(let s of a){let i=!1,o=s.substring(1,s.length-1),t="simple";o.endsWith("*")&&(i=!0,o=o.substring(0,o.length-1)),o.startsWith(".")?(o=o.substring(1),t="label"):o.startsWith(";")&&(o=o.substring(1),t="matrix");let l=e[o];if(l==null)continue;if(Array.isArray(l)){r=r.replace(s,T({explode:i,name:o,style:t,value:l}));continue}if(typeof l=="object"){r=r.replace(s,C({explode:i,name:o,style:t,value:l,valueOnly:!0}));continue}if(t==="matrix"){r=r.replace(s,`;${g({name:o,value:l})}`);continue}let f=encodeURIComponent(t==="label"?`.${l}`:l);r=r.replace(s,f)}return r},z=({allowReserved:e,array:n,object:r}={})=>s=>{let i=[];if(s&&typeof s=="object")for(let o in s){let t=s[o];if(t!=null)if(Array.isArray(t)){let l=T({allowReserved:e,explode:!0,name:o,style:"form",value:t,...n});l&&i.push(l)}else if(typeof t=="object"){let l=C({allowReserved:e,explode:!0,name:o,style:"deepObject",value:t,...r});l&&i.push(l)}else{let l=g({allowReserved:e,name:o,value:t});l&&i.push(l)}}return i.join("&")},D=e=>{if(!e)return"stream";let n=e.split(";")[0]?.trim();if(n){if(n.startsWith("application/json")||n.endsWith("+json"))return"json";if(n==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(r=>n.startsWith(r)))return"blob";if(n.startsWith("text/"))return"text"}},k=async({security:e,...n})=>{for(let r of e){let a=await j(r,n.auth);if(!a)continue;let s=r.name??"Authorization";switch(r.in){case"query":n.query||(n.query={}),n.query[s]=a;break;case"cookie":n.headers.append("Cookie",`${s}=${a}`);break;case"header":default:n.headers.set(s,a);break}return}},E=e=>M({baseUrl:e.baseUrl,path:e.path,query:e.query,querySerializer:typeof e.querySerializer=="function"?e.querySerializer:z(e.querySerializer),url:e.url}),M=({baseUrl:e,path:n,query:r,querySerializer:a,url:s})=>{let i=s.startsWith("/")?s:`/${s}`,o=(e??"")+i;n&&(o=_({path:n,url:o}));let t=r?a(r):"";return t.startsWith("?")&&(t=t.substring(1)),t&&(o+=`?${t}`),o},A=(e,n)=>{let r={...e,...n};return r.baseUrl?.endsWith("/")&&(r.baseUrl=r.baseUrl.substring(0,r.baseUrl.length-1)),r.headers=R(e.headers,n.headers),r},R=(...e)=>{let n=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let a=r instanceof Headers?r.entries():Object.entries(r);for(let[s,i]of a)if(i===null)n.delete(s);else if(Array.isArray(i))for(let o of i)n.append(s,o);else i!==void 0&&n.set(s,typeof i=="object"?JSON.stringify(i):i)}return n},m=class{_fns;constructor(){this._fns=[]}clear(){this._fns=[]}getInterceptorIndex(n){return typeof n=="number"?this._fns[n]?n:-1:this._fns.indexOf(n)}exists(n){let r=this.getInterceptorIndex(n);return!!this._fns[r]}eject(n){let r=this.getInterceptorIndex(n);this._fns[r]&&(this._fns[r]=null)}update(n,r){let a=this.getInterceptorIndex(n);return this._fns[a]?(this._fns[a]=r,n):!1}use(n){return this._fns=[...this._fns,n],this._fns.length-1}},P=()=>({error:new m,request:new m,response:new m}),F=z({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),H={"Content-Type":"application/json"},O=(e={})=>({...w,headers:H,parseAs:"auto",querySerializer:F,...e});var q=(e={})=>{let n=A(O(),e),r=()=>({...n}),a=o=>(n=A(n,o),r()),s=P(),i=async o=>{let t={...n,...o,fetch:o.fetch??n.fetch??globalThis.fetch,headers:R(n.headers,o.headers)};t.security&&await k({...t,security:t.security}),t.requestValidator&&await t.requestValidator(t),t.body&&t.bodySerializer&&(t.body=t.bodySerializer(t.body)),(t.body===void 0||t.body==="")&&t.headers.delete("Content-Type");let l=E(t),f={redirect:"follow",...t},d=new Request(l,f);for(let c of s.request._fns)c&&(d=await c(d,t));let b=t.fetch,p=await b(d);for(let c of s.response._fns)c&&(p=await c(p,d,t));let S={request:d,response:p};if(p.ok){if(p.status===204||p.headers.get("Content-Length")==="0")return t.responseStyle==="data"?{}:{data:{},...S};let c=(t.parseAs==="auto"?D(p.headers.get("Content-Type")):t.parseAs)??"json",y;switch(c){case"arrayBuffer":case"blob":case"formData":case"json":case"text":y=await p[c]();break;case"stream":return t.responseStyle==="data"?p.body:{data:p.body,...S}}return c==="json"&&(t.responseValidator&&await t.responseValidator(y),t.responseTransformer&&(y=await t.responseTransformer(y))),t.responseStyle==="data"?y:{data:y,...S}}let x=await p.text();try{x=JSON.parse(x)}catch{}let h=x;for(let c of s.error._fns)c&&(h=await c(x,p,d,t));if(h=h||{},t.throwOnError)throw h;return t.responseStyle==="data"?void 0:{error:h,...S}};return{buildUrl:E,connect:o=>i({...o,method:"CONNECT"}),delete:o=>i({...o,method:"DELETE"}),get:o=>i({...o,method:"GET"}),getConfig:r,head:o=>i({...o,method:"HEAD"}),interceptors:s,options:o=>i({...o,method:"OPTIONS"}),patch:o=>i({...o,method:"PATCH"}),post:o=>i({...o,method:"POST"}),put:o=>i({...o,method:"PUT"}),request:i,setConfig:a,trace:o=>i({...o,method:"TRACE"})}};var u=q(O({baseUrl:"https://ads.mozilla.org"}));var fe=e=>(e.client??u).post({url:"/v1/ads",...e,headers:{"Content-Type":"application/json",...e.headers}}),ue=e=>(e.client??u).get({url:"/v1/t",...e}),de=e=>(e?.client??u).get({url:"/v1/log",...e}),ye=e=>(e.client??u).delete({url:"/v1/delete_user",...e,headers:{"Content-Type":"application/json",...e.headers}}),he=e=>(e.client??u).get({url:"/v1/images",...e}),ge=e=>(e.client??u).post({url:"/spocs",...e,headers:{"Content-Type":"application/json",...e.headers}}),me=e=>(e.client??u).delete({url:"/user",...e,headers:{"Content-Type":"application/json",...e.headers}}),Oe=e=>(e?.client??u).get({url:"/v1/tiles",...e});export{u as a,fe as b,ue as c,de as d,ye as e,he as f,ge as g,me as h,Oe as i};
